<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Winter Sorting Hat Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: transparent; /* чтобы не ругалось с фоном Genially */
    }

    /* контейнер на весь iframe */
    #game-root {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    /* виртуальная сцена 1920x1080, которую мы будем масштабировать */
    #stage-wrapper {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 1920px;
      height: 1080px;
      transform-origin: 50% 50%;
    }

    #stage {
      width: 100%;
      height: 100%;
      background-image: url("https://i.postimg.cc/FHkKR4Xm/photo-2025-11-24-14-34-50.jpg");
      background-size: cover;
      background-position: center;
      position: relative;

      display: flex;
      align-items: center;
      justify-content: flex-end;
      background-color: rgba(0, 0, 0, 0.25);
    }

    .answer-btn {
      position: relative;
      overflow: hidden;
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background-color 120ms ease;
    }
    .answer-btn.clicked {
      transform: scale(0.96);
      box-shadow: 0 0 32px rgba(251,191,36,0.7);
      border-color: rgba(251,191,36,0.9);
      background-color: rgba(15,23,42,0.95);
    }
    .answer-btn.clicked::before,
    .answer-btn.clicked::after {
      content: "";
      position: absolute;
      border-radius: 999px;
      filter: blur(6px);
      opacity: 0.9;
      animation: sparkle 300ms ease-out forwards;
    }
    .answer-btn.clicked::before {
      width: 40px;
      height: 40px;
      left: -10px;
      top: -10px;
      background: rgba(251,191,36,0.7);
    }
    .answer-btn.clicked::after {
      width: 28px;
      height: 28px;
      right: -6px;
      bottom: -6px;
      background: rgba(56,189,248,0.7);
    }
    @keyframes sparkle {
      from { transform: scale(0.4); opacity: 1; }
      to   { transform: scale(1.4); opacity: 0; }
    }
    @keyframes pulse10 {
      0%   { transform: scale(1); box-shadow: 0 0 30px rgba(251,191,36,0.6); }
      50%  { transform: scale(1.02); box-shadow: 0 0 70px rgba(251,191,36,1); }
      100% { transform: scale(1); box-shadow: 0 0 30px rgba(251,191,36,0.6); }
    }
    .crest-image {
      animation: pulse10 10s ease-out infinite;
    }
  </style>
</head>
<body>
  <div id="game-root">
    <div id="stage-wrapper">
      <div id="stage">
        <div class="h-full flex items-center justify-end pr-24 w-full">
          <div id="ui-column" class="flex flex-col gap-4 items-stretch text-[20px] text-amber-50" style="width: 640px;">
            <div id="welcome-panel" class="rounded-3xl border border-amber-200/70 bg-slate-950/70 backdrop-blur-xl shadow-[0_0_40px_rgba(0,0,0,0.8)] px-8 py-8">
              <h1 class="text-4xl font-extrabold mb-3 drop-shadow-[0_0_20px_rgba(0,0,0,0.9)]">
                Sorting Hat
              </h1>
              <p class="leading-relaxed mb-3">
                Answer the questions and let the magic hat find your Hogwarts
                house. Be honest, be yourself, and follow your winter wizard
                heart.
              </p>
              <p class="leading-relaxed mb-6">
                One question at a time. Choose the answer that is most like
                you.
              </p>
              <button
                id="begin-btn"
                class="inline-flex items-center justify-center rounded-full px-8 py-3 text-xl font-semibold bg-amber-300 text-slate-900 shadow-lg shadow-amber-400/60 hover:bg-amber-200 active:scale-95 transition"
              >
                Begin the Sorting
              </button>
            </div>

            <div id="quiz-panel" class="hidden flex flex-col gap-4">
              <div class="rounded-[32px] border border-amber-200/70 bg-white/18 backdrop-blur-xl px-8 py-6 text-amber-50 shadow-[0_0_40px_rgba(0,0,0,0.8)] relative overflow-hidden">
                <div class="pointer-events-none absolute inset-0 bg-gradient-to-br from-white/15 via-transparent to-amber-300/20"></div>
                <div class="relative">
                  <div id="question-counter" class="text-sm tracking-[0.25em] uppercase text-amber-100/80 mb-2">
                    Question 1 of 12
                  </div>
                  <p id="question-text" class="text-2xl font-semibold leading-snug">
                    Question text here
                  </p>
                </div>
              </div>
              <div class="flex flex-col gap-3">
                <button data-index="0" class="answer-btn w-full text-left rounded-3xl bg-slate-950/70 border border-cyan-200/50 px-6 py-4 flex gap-4 items-center shadow-[0_0_30px_rgba(0,0,0,0.9)] hover:border-amber-200 hover:bg-slate-950/90 hover:shadow-amber-300/40">
                  <span class="flex h-9 w-9 items-center justify-center rounded-full bg-amber-300 text-slate-900 text-base font-bold shadow-md shadow-amber-400/70">
                    A
                  </span>
                  <span class="answer-text text-xl leading-snug text-amber-50">
                    Answer A
                  </span>
                </button>
                <button data-index="1" class="answer-btn w-full text-left rounded-3xl bg-slate-950/70 border border-cyan-200/50 px-6 py-4 flex gap-4 items-center shadow-[0_0_30px_rgba(0,0,0,0.9)] hover:border-amber-200 hover:bg-slate-950/90 hover:shadow-amber-300/40">
                  <span class="flex h-9 w-9 items-center justify-center rounded-full bg-amber-300 text-slate-900 text-base font-bold shadow-md shadow-amber-400/70">
                    B
                  </span>
                  <span class="answer-text text-xl leading-snug text-amber-50">
                    Answer B
                  </span>
                </button>
                <button data-index="2" class="answer-btn w-full text-left rounded-3xl bg-slate-950/70 border border-cyan-200/50 px-6 py-4 flex gap-4 items-center shadow-[0_0_30px_rgba(0,0,0,0.9)] hover:border-amber-200 hover:bg-slate-950/90 hover:shadow-amber-300/40">
                  <span class="flex h-9 w-9 items-center justify-center rounded-full bg-amber-300 text-slate-900 text-base font-bold shadow-md shadow-amber-400/70">
                    C
                  </span>
                  <span class="answer-text text-xl leading-snug text-amber-50">
                    Answer C
                  </span>
                </button>
                <button data-index="3" class="answer-btn w-full text-left rounded-3xl bg-slate-950/70 border border-cyan-200/50 px-6 py-4 flex gap-4 items-center shadow-[0_0_30px_rgba(0,0,0,0.9)] hover:border-amber-200 hover:bg-slate-950/90 hover:shadow-amber-300/40">
                  <span class="flex h-9 w-9 items-center justify-center rounded-full bg-amber-300 text-slate-900 text-base font-bold shadow-md shadow-amber-400/70">
                    D
                  </span>
                  <span class="answer-text text-xl leading-snug text-amber-50">
                    Answer D
                  </span>
                </button>
              </div>
            </div>

            <div id="result-panel" class="hidden flex flex-col gap-6 items-center text-amber-50">
              <div class="relative flex items-center justify-center" style="width: 420px; height: 420px;">
                <div class="pointer-events-none absolute inset-0 flex items-center justify-center">
                  <span class="absolute w-full h-full rounded-full bg-amber-300/10 blur-3xl animate-ping"></span>
                  <span class="absolute w-3/4 h-3/4 rounded-full bg-amber-400/15 blur-2xl"></span>
                </div>
                <img
                  id="result-crest"
                  src=""
                  alt="House crest"
                  class="crest-image w-full h-full object-cover rounded-3xl border border-amber-100/80 shadow-[0_0_45px_rgba(251,191,36,0.9)]"
                />
              </div>

              <div class="rounded-3xl bg-slate-950/90 px-6 py-6 flex flex-col items-center gap-3 shadow-[0_0_35px_rgba(0,0,0,0.95)]" style="width: 420px;">
                <div class="text-xs tracking-[0.25em] uppercase text-amber-100/80 text-center">
                  The Sorting Hat has decided…
                </div>
                <p id="result-speech" class="text-xl leading-relaxed text-center whitespace-pre-line">
                  Result text
                </p>
              </div>

              <button
                id="restart-btn"
                class="mt-2 inline-flex items-center justify-center rounded-full px-8 py-3 text-xl font-semibold bg-slate-100 text-slate-900 shadow-lg border border-amber-300 hover:bg-amber-200 active:scale-95 transition"
              >
                Try again
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* --------- АДАПТИВНЫЙ МАСШТАБ ПОД ЛЮБОЙ IFRAME --------- */
    function resizeGame() {
      var wrapper = document.getElementById("stage-wrapper");
      var baseWidth = 1920;
      var baseHeight = 1080;

      var w = window.innerWidth;
      var h = window.innerHeight;

      var scale = Math.min(w / baseWidth, h / baseHeight);

      // центрируем и масштабируем сцену
      wrapper.style.transform =
        "translate(-50%, -50%) scale(" + scale + ")";
    }

    window.addEventListener("resize", resizeGame);
    window.addEventListener("load", resizeGame);
    resizeGame();

    /* --------- ЛОГИКА КВИЗА --------- */
    var QUESTIONS = [
      {
        text: "When you set off on a trip, you usually",
        options: [
          { letter: "A", text: "plan everything in detail", house: "Ravenclaw" },
          { letter: "B", text: "take some snacks and go", house: "Slytherin" },
          { letter: "C", text: "wait for your friends", house: "Hufflepuff" },
          { letter: "D", text: "just go and see what happens", house: "Gryffindor" }
        ]
      },
      {
        text: "You come across a lost puppy in the snow. You",
        options: [
          { letter: "A", text: "look for its owner", house: "Ravenclaw" },
          { letter: "B", text: "take it home", house: "Slytherin" },
          { letter: "C", text: "call your friends to help", house: "Hufflepuff" },
          { letter: "D", text: "keep it, you always wanted a puppy", house: "Gryffindor" }
        ]
      },
      {
        text: "You run into a person from your school in town. You",
        options: [
          { letter: "A", text: "say hello politely", house: "Ravenclaw" },
          { letter: "B", text: "talk for one minute", house: "Slytherin" },
          { letter: "C", text: "stop and chat for a long time", house: "Hufflepuff" },
          { letter: "D", text: "pretend you didn’t see them", house: "Gryffindor" }
        ]
      },
      {
        text: "You see someone trying to break in to a school building. You",
        options: [
          { letter: "A", text: "call an adult", house: "Ravenclaw" },
          { letter: "B", text: "watch from a safe place", house: "Slytherin" },
          { letter: "C", text: "ask what is happening", house: "Hufflepuff" },
          { letter: "D", text: "run away immediately", house: "Gryffindor" }
        ]
      },
      {
        text: "A snowball fight breaks out at school. You",
        options: [
          { letter: "A", text: "stay calm and watch", house: "Ravenclaw" },
          { letter: "B", text: "join your friends in the fight", house: "Slytherin" },
          { letter: "C", text: "start your own team", house: "Hufflepuff" },
          { letter: "D", text: "throw the first snowball", house: "Gryffindor" }
        ]
      },
      {
        text: "Holiday snacks suddenly take over the table. You",
        options: [
          { letter: "A", text: "organise the snacks nicely", house: "Ravenclaw" },
          { letter: "B", text: "try a little bit of everything", house: "Slytherin" },
          { letter: "C", text: "call your family to come and eat", house: "Hufflepuff" },
          { letter: "D", text: "eat the best things first", house: "Gryffindor" }
        ]
      },
      {
        text: "You feel like you might pass out after running in the cold. You",
        options: [
          { letter: "A", text: "breathe slowly and sit down", house: "Ravenclaw" },
          { letter: "B", text: "drink some water", house: "Slytherin" },
          { letter: "C", text: "ask a friend for help", house: "Hufflepuff" },
          { letter: "D", text: "lie on the ground very dramatically", house: "Gryffindor" }
        ]
      },
      {
        text: "What is the hardest thing to get over in winter?",
        options: [
          { letter: "A", text: "the cold weather", house: "Ravenclaw" },
          { letter: "B", text: "the short days", house: "Slytherin" },
          { letter: "C", text: "too much school", house: "Hufflepuff" },
          { letter: "D", text: "waking up early", house: "Gryffindor" }
        ]
      },
      {
        text: "You forgot your homework. You need to make up a reason. You",
        options: [
          { letter: "A", text: "tell the truth", house: "Ravenclaw" },
          { letter: "B", text: "say you were very busy", house: "Slytherin" },
          { letter: "C", text: "invent a creative story", house: "Hufflepuff" },
          { letter: "D", text: "blame your cat", house: "Gryffindor" }
        ]
      },
      {
        text: "A friend always turns up late to winter meetups. You",
        options: [
          { letter: "A", text: "forgive them", house: "Ravenclaw" },
          { letter: "B", text: "laugh about it", house: "Slytherin" },
          { letter: "C", text: "tell them, 'It’s okay'", house: "Hufflepuff" },
          { letter: "D", text: "roll your eyes", house: "Gryffindor" }
        ]
      },
      {
        text: "You want to carry on with a project, but you feel tired. You",
        options: [
          { letter: "A", text: "make a simple plan", house: "Ravenclaw" },
          { letter: "B", text: "turn on some music", house: "Slytherin" },
          { letter: "C", text: "ask friends to help you", house: "Hufflepuff" },
          { letter: "D", text: "take a long break first", house: "Gryffindor" }
        ]
      },
      {
        text: "You are trying to figure out a new winter recipe. You",
        options: [
          { letter: "A", text: "follow the instructions exactly", house: "Ravenclaw" },
          { letter: "B", text: "try the easy steps first", house: "Slytherin" },
          { letter: "C", text: "ask someone to help you", house: "Hufflepuff" },
          { letter: "D", text: "just guess and hope it works", house: "Gryffindor" }
        ]
      }
    ];

    var HOUSE_TEXT = {
      Gryffindor: {
        crest: "https://i.postimg.cc/nV6mG0FP/photo-2025-11-24-14-40-32.jpg",
        speech:
          "Oh! A brave one! You jump into new things so fast, you just run into every adventure. You carry on, even when it is difficult. You can make up fun ideas and jump into adventures. Well then… no fear, no doubts… GRYFFINDOR!"
      },
      Slytherin: {
        crest: "https://i.postimg.cc/KcKLTd2W/photo-2025-11-24-14-41-13.jpg",
        speech:
          "Oh, interesting… very interesting. You always turn up with a quick idea. You like to take over when things get messy. Smart, fast, confident… yes, I see your style. No doubt about it… SLYTHERIN!"
      },
      Hufflepuff: {
        crest: "https://i.postimg.cc/zD9hF0z2/photo-2025-11-24-14-42-30.jpg",
        speech:
          "Ahh… such a warm heart. You always try to help, to stay kind, to carry on with friends. Even when things are hard to get over, you stay calm. So patient… so gentle… I don’t need more time for this one. HUFFLEPUFF!"
      },
      Ravenclaw: {
        crest: "https://i.postimg.cc/3rPGFn8P/photo-2025-11-24-14-43-20.jpg",
        speech:
          "Hmm… let me think… yes, yes… I can see it now. You like to think first, don’t you? Always trying to figure out every little detail. You like to set off with a clear plan, not with chaos. Very clever, very calm… Oh, I know exactly where you belong. RAVENCLAW!"
      }
    };

    var currentIndex = 0;
    var scores = { Ravenclaw: 0, Slytherin: 0, Hufflepuff: 0, Gryffindor: 0 };

    var welcomePanel = document.getElementById("welcome-panel");
    var quizPanel = document.getElementById("quiz-panel");
    var resultPanel = document.getElementById("result-panel");

    var questionCounterEl = document.getElementById("question-counter");
    var questionTextEl = document.getElementById("question-text");
    var answerButtons = Array.prototype.slice.call(document.querySelectorAll(".answer-btn"));
    var resultCrestEl = document.getElementById("result-crest");
    var resultSpeechEl = document.getElementById("result-speech");

    function showWelcome() {
      welcomePanel.classList.remove("hidden");
      quizPanel.classList.add("hidden");
      resultPanel.classList.add("hidden");
    }

    function showQuiz() {
      welcomePanel.classList.add("hidden");
      quizPanel.classList.remove("hidden");
      resultPanel.classList.add("hidden");
    }

    function showResult() {
      welcomePanel.classList.add("hidden");
      quizPanel.classList.add("hidden");
      resultPanel.classList.remove("hidden");
    }

    function renderQuestion() {
      var q = QUESTIONS[currentIndex];
      questionCounterEl.textContent = "Question " + (currentIndex + 1) + " of " + QUESTIONS.length;
      questionTextEl.textContent = q.text;
      q.options.forEach(function(opt, i) {
        var btn = answerButtons[i];
        var letterSpan = btn.querySelector("span:first-child");
        var textSpan = btn.querySelector(".answer-text");
        if (letterSpan) letterSpan.textContent = opt.letter;
        textSpan.textContent = opt.text;
        btn.setAttribute("data-house", opt.house);
      });
    }

    function handleAnswerClick(e) {
      var btn = e.currentTarget;
      var house = btn.getAttribute("data-house");
      if (!house) return;

      btn.classList.add("clicked");
      setTimeout(function() {
        btn.classList.remove("clicked");
      }, 220);

      scores[house] += 1;

      var isLast = currentIndex === QUESTIONS.length - 1;
      if (isLast) {
        var bestHouse = "Gryffindor";
        var bestScore = -1;
        for (var h in scores) {
          if (scores[h] > bestScore) {
            bestScore = scores[h];
            bestHouse = h;
          }
        }
        var info = HOUSE_TEXT[bestHouse];
        resultCrestEl.src = info.crest;
        resultCrestEl.alt = bestHouse;
        resultSpeechEl.textContent = info.speech;
        showResult();
      } else {
        currentIndex += 1;
        renderQuestion();
      }
    }

    answerButtons.forEach(function(btn) {
      btn.addEventListener("click", handleAnswerClick);
    });

    document.getElementById("begin-btn").addEventListener("click", function() {
      currentIndex = 0;
      scores = { Ravenclaw: 0, Slytherin: 0, Hufflepuff: 0, Gryffindor: 0 };
      renderQuestion();
      showQuiz();
    });

    document.getElementById("restart-btn").addEventListener("click", function() {
      scores = { Ravenclaw: 0, Slytherin: 0, Hufflepuff: 0, Gryffindor: 0 };
      currentIndex = 0;
      renderQuestion();
      showWelcome();
    });

    showWelcome();
  </script>
</body>
</html>
